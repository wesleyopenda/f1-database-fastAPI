{% extends "base.html" %}
{% block title %}Team Details - F1 Database{% endblock %}
{% block content %}
<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-10">
      <div class="card shadow-sm mb-4">
        <div class="card-header text-center">
          <h3>{{ team.name }}</h3>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-6">
              {% if team.logo_url %}
                <img src="{{ team.logo_url }}" class="img-fluid" alt="{{ team.name }}">
              {% else %}
                <img src="https://via.placeholder.com/400x200.png?text=No+Logo" class="img-fluid" alt="No Logo">
              {% endif %}
            </div>
            <div class="col-md-6">
              <p><strong>Year Founded:</strong> {{ team.year_founded }}</p>
              <p><strong>Total Pole Positions:</strong> {{ team.total_pole_positions }}</p>
              <p><strong>Total Race Wins:</strong> {{ team.total_race_wins }}</p>
              <p><strong>Total Constructor Titles:</strong> {{ team.total_constructor_titles }}</p>
              <p><strong>Finishing Position (Previous Season):</strong> {{ team.finishing_position_previous_season }}</p>
            </div>
          </div>
          <div class="d-flex justify-content-between mt-4">
            <a href="/teams/edit/{{ team.id }}" class="btn btn-warning">Edit</a>
            <form action="/teams/delete/{{ team.id }}" method="post" onsubmit="return confirm('Are you sure you want to delete this team?');">
              <button type="submit" class="btn btn-danger">Delete</button>
            </form>
            <a href="/teams" class="btn btn-secondary">Back to List</a>
          </div>
        </div>
      </div>
      
      <!-- Associated Drivers Section -->
      <h4 class="mb-3">Drivers in {{ team.name }}</h4>
      {% if drivers %}
      <div class="row">
        {% for driver in drivers %}
          <div class="col-md-4 mb-3">
            <div class="card">
              {% if driver.image_url %}
                <img src="{{ driver.image_url }}" class="card-img-top" alt="{{ driver.name }}">
              {% else %}
                <img src="https://via.placeholder.com/300x200.png?text=No+Image" class="card-img-top" alt="No Image">
              {% endif %}
              <div class="card-body">
                <h5 class="card-title">{{ driver.name }}</h5>
                <a href="/drivers/{{ driver.id }}" class="btn btn-primary">View Driver</a>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
      {% else %}
      <div class="alert alert-info">No drivers associated with this team.</div>
      {% endif %}
      
    </div>
  </div>
</div>
{% endblock %}
